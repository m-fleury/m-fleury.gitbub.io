<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Theory Module (repository version)</title>
<link media="all" rel="stylesheet" type="text/css" href="isabelle.css"/>
</head>

<body>
<div class="head"><h1>Theory Module</h1>

<span class="command">theory</span> <span class="name">Module</span><br/>
<span class="keyword">imports</span> <a href="Ring.html"><span class="name">Ring</span></a><br/>

</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(*  Title:      HOL/Algebra/Module.thy
    Author:     Clemens Ballarin, started 15 April 2003
                with contributions by Martin Baillon
*)</span></span></span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Module</span><span>
</span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span>Ring</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Modules over an Abelian Group&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Definitions&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">record</span></span><span> </span><span class="delimiter">(</span><span class="tfree">&#39;a</span><span class="delimiter">,</span><span> </span><span class="tfree">&#39;b</span><span class="delimiter">)</span><span> </span><span>module</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#39;b ring&quot;</span></span></span><span> </span><span class="delimiter">+</span><span>
</span><span>  </span><span>smult</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;[&#39;a, &#39;b] =&gt; &#39;b&quot;</span></span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">infixl</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8857;&#305;&quot;</span></span></span><span> </span><span>70</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">locale</span></span><span> </span><span>module</span><span> </span><span class="delimiter">=</span><span> </span><span>R</span><span class="delimiter">?</span><span class="delimiter">:</span><span> </span><span>cring</span><span> </span><span class="delimiter">+</span><span> </span><span>M</span><span class="delimiter">?</span><span class="delimiter">:</span><span> </span><span>abelian_group</span><span> </span><span>M</span><span> </span><span class="keyword2"><span class="keyword">for</span></span><span> </span><span>M</span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">structure</span></span><span class="delimiter">)</span><span> </span><span class="delimiter">+</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>smult_closed</span><span> </span><span class="delimiter">[</span><span>simp</span><span class="delimiter">,</span><span> </span><span>intro</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;[| a &#8712; carrier R; x &#8712; carrier M |] ==&gt; a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x &#8712; carrier M&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>smult_l_distr</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;[| a &#8712; carrier R; b &#8712; carrier R; x &#8712; carrier M |] ==&gt;
      (a &#8853; b) &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x = a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> b &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>smult_r_distr</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;[| a &#8712; carrier R; x &#8712; carrier M; y &#8712; carrier M |] ==&gt;
      a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> (x &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> y) = a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> y&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>smult_assoc1</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;[| a &#8712; carrier R; b &#8712; carrier R; x &#8712; carrier M |] ==&gt;
      (a &#8855; b) &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x = a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> (b &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>smult_one</span><span> </span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;x &#8712; carrier M ==&gt; &#120813; &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x = x&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">locale</span></span><span> </span><span>algebra</span><span> </span><span class="delimiter">=</span><span> </span><span>module</span><span> </span><span class="delimiter">+</span><span> </span><span>cring</span><span> </span><span>M</span><span> </span><span class="delimiter">+</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>smult_assoc2</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;[| a &#8712; carrier R; x &#8712; carrier M; y &#8712; carrier M |] ==&gt;
      (a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x) &#8855;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> y = a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> (x &#8855;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> y)&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>moduleI</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>R</span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">structure</span></span><span class="delimiter">)</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>M</span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">structure</span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>cring</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;cring R&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>abelian_group</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abelian_group M&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>smult_closed</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;!!a x. [| a &#8712; carrier R; x &#8712; carrier M |] ==&gt; a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x &#8712; carrier M&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>smult_l_distr</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;!!a b x. [| a &#8712; carrier R; b &#8712; carrier R; x &#8712; carrier M |] ==&gt;
      (a &#8853; b) &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x = (a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x) &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> (b &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>smult_r_distr</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;!!a x y. [| a &#8712; carrier R; x &#8712; carrier M; y &#8712; carrier M |] ==&gt;
      a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> (x &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> y) = (a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x) &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> (a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> y)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>smult_assoc1</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;!!a b x. [| a &#8712; carrier R; b &#8712; carrier R; x &#8712; carrier M |] ==&gt;
      (a &#8855; b) &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x = a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> (b &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>smult_one</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;!!x. x &#8712; carrier M ==&gt; &#120813; &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x = x&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;module R M&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>module.intro</span><span> </span><span>cring.axioms</span><span> </span><span>abelian_group.axioms</span><span>
</span><span>    </span><span>module_axioms.intro</span><span> </span><span>assms</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>algebraI</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>R</span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">structure</span></span><span class="delimiter">)</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>M</span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">structure</span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>R_cring</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;cring R&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>M_cring</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;cring M&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>smult_closed</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;!!a x. [| a &#8712; carrier R; x &#8712; carrier M |] ==&gt; a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x &#8712; carrier M&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>smult_l_distr</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;!!a b x. [| a &#8712; carrier R; b &#8712; carrier R; x &#8712; carrier M |] ==&gt;
      (a &#8853; b) &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x = (a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x) &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> (b &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>smult_r_distr</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;!!a x y. [| a &#8712; carrier R; x &#8712; carrier M; y &#8712; carrier M |] ==&gt;
      a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> (x &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> y) = (a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x) &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> (a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> y)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>smult_assoc1</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;!!a b x. [| a &#8712; carrier R; b &#8712; carrier R; x &#8712; carrier M |] ==&gt;
      (a &#8855; b) &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x = a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> (b &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>smult_one</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;!!x. x &#8712; carrier M ==&gt; (one R) &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x = x&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>smult_assoc2</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;!!a x y. [| a &#8712; carrier R; x &#8712; carrier M; y &#8712; carrier M |] ==&gt;
      (a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x) &#8855;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> y = a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> (x &#8855;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> y)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;algebra R M&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>intro_locales</span><span>
</span><span>             </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>cring.axioms</span><span> </span><span>ring.axioms</span><span> </span><span>abelian_group.axioms</span><span> </span><span>comm_monoid.axioms</span><span> </span><span>assms</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>module_axioms.intro</span><span class="delimiter">)</span><span>
</span><span>          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>smult_closed</span><span class="delimiter">)</span><span>
</span><span>         </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>smult_l_distr</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>smult_r_distr</span><span class="delimiter">)</span><span>
</span><span>       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>smult_assoc1</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>smult_one</span><span class="delimiter">)</span><span>
</span><span>     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>cring.axioms</span><span> </span><span>ring.axioms</span><span> </span><span>abelian_group.axioms</span><span> </span><span>comm_monoid.axioms</span><span> </span><span>assms</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>algebra_axioms.intro</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>smult_assoc2</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>algebra</span><span class="delimiter">)</span><span> </span><span>R_cring</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;cring R&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">..</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>algebra</span><span class="delimiter">)</span><span> </span><span>M_cring</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;cring M&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">..</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>algebra</span><span class="delimiter">)</span><span> </span><span>module</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;module R M&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>moduleI</span><span> </span><span>R_cring</span><span> </span><span>is_abelian_group</span><span> </span><span>smult_l_distr</span><span> </span><span>smult_r_distr</span><span> </span><span>smult_assoc1</span><span class="delimiter">)</span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Basic Properties of Modules&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>module</span><span class="delimiter">)</span><span> </span><span>smult_l_null</span><span> </span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;x &#8712; carrier M ==&gt; &#120812; &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x = &#120812;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub>&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span>-</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>M</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;x &#8712; carrier M&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">note</span></span><span> </span><span>facts</span><span> </span><span class="delimiter">=</span><span> </span><span>M</span><span> </span><span>smult_closed</span><span> </span><span class="delimiter">[</span><span>OF</span><span> </span><span>R.zero_closed</span><span class="delimiter">]</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>facts</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#120812; &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x = (&#120812; &#8853; &#120812;) &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x &quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>smult_l_distr</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;... = &#120812; &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> &#120812; &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>smult_l_distr</span><span class="delimiter">[</span><span>of</span><span> </span><span>&#120812;</span><span> </span><span>&#120812;</span><span> </span><span>x</span><span class="delimiter">]</span><span> </span><span>facts</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#120812; &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x = &#120812;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub>&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>facts</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>M.add.r_cancel_one&#39;</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>module</span><span class="delimiter">)</span><span> </span><span>smult_r_null</span><span> </span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;a &#8712; carrier R ==&gt; a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> &#120812;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> = &#120812;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub>&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>R</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;a &#8712; carrier R&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">note</span></span><span> </span><span>facts</span><span> </span><span class="delimiter">=</span><span> </span><span>R</span><span> </span><span>smult_closed</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>facts</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> &#120812;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> = (a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> &#120812;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> &#120812;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub>) &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> &#8854;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> (a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> &#120812;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub>)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>M.add.inv_solve_right</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>R</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;... = a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> (&#120812;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> &#120812;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub>) &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> &#8854;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> (a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> &#120812;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub>)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>smult_r_distr</span><span> </span><span>del</span><span class="delimiter">:</span><span> </span><span>M.l_zero</span><span> </span><span>M.r_zero</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>facts</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;... = &#120812;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub>&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>M.r_neg</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">.</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>module</span><span class="delimiter">)</span><span> </span><span>smult_l_minus</span><span class="delimiter">:</span><span>
</span><span class="string"><span class="delete"><span class="delete">&quot;&#10214; a &#8712; carrier R; x &#8712; carrier M &#10215; &#10233; (&#8854;a) &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x = &#8854;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> (a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span>-</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>RM</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;a &#8712; carrier R&quot;</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;x &#8712; carrier M&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>RM</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a_smult</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x &#8712; carrier M&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>RM</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>ma_smult</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8854;a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x &#8712; carrier M&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">note</span></span><span> </span><span>facts</span><span> </span><span class="delimiter">=</span><span> </span><span>RM</span><span> </span><span>a_smult</span><span> </span><span>ma_smult</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>facts</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(&#8854;a) &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x = (&#8854;a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x) &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> &#8854;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub>(a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>M.add.inv_solve_right</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>RM</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;... = (&#8854;a &#8853; a) &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> &#8854;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub>(a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>smult_l_distr</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>facts</span><span> </span><span>smult_l_null</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;... = &#8854;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub>(a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>R.l_neg</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">.</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>module</span><span class="delimiter">)</span><span> </span><span>smult_r_minus</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;[| a &#8712; carrier R; x &#8712; carrier M |] ==&gt; a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> (&#8854;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub>x) = &#8854;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> (a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>RM</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;a &#8712; carrier R&quot;</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;x &#8712; carrier M&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">note</span></span><span> </span><span>facts</span><span> </span><span class="delimiter">=</span><span> </span><span>RM</span><span> </span><span>smult_closed</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>facts</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> (&#8854;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub>x) = (a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> &#8854;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub>x &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x) &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> &#8854;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub>(a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>M.add.inv_solve_right</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>RM</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;... = a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> (&#8854;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub>x &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x) &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> &#8854;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub>(a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>smult_r_distr</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>facts</span><span> </span><span>smult_l_null</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;... = &#8854;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub>(a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>M.add.inv_closed</span><span> </span><span>M.add.inv_solve_right</span><span> </span><span>M.l_neg</span><span> </span><span>R.zero_closed</span><span> </span><span>r_null</span><span> </span><span>smult_assoc1</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">.</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>module</span><span class="delimiter">)</span><span> </span><span>finsum_smult_ldistr</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214; finite A; a &#8712; carrier R; f: A &#8594; carrier M &#10215; &#10233;
     a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> (&#10753;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> i &#8712; A. (f i)) = (&#10753;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> i &#8712; A. ( a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> (f i)))&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>set</span><span class="delimiter">:</span><span> </span><span>finite</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>empty</span><span> </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>M.finsum_empty</span><span> </span><span>M.zero_closed</span><span> </span><span>R.zero_closed</span><span> </span><span>r_null</span><span> </span><span>smult_assoc1</span><span> </span><span>smult_l_null</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>insert</span><span> </span><span>x</span><span> </span><span>F</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>Pi_def</span><span> </span><span>smult_r_distr</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Submodules&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">locale</span></span><span> </span><span>submodule</span><span> </span><span class="delimiter">=</span><span> </span><span>subgroup</span><span> </span><span>H</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;add_monoid M&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">for</span></span><span> </span><span>H</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>R</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(&#39;a, &#39;b) ring_scheme&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>M</span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">structure</span></span><span class="delimiter">)</span><span>
</span><span class="delimiter">+</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>smult_closed</span><span> </span><span class="delimiter">[</span><span>simp</span><span class="delimiter">,</span><span> </span><span>intro</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;a &#8712; carrier R; x &#8712; H&#10215; &#10233; a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x &#8712; H&quot;</span></span></span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>module</span><span class="delimiter">)</span><span> </span><span>submoduleI</span><span> </span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>subset</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;H &#8838; carrier M&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>zero</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#120812;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> &#8712; H&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>a_inv</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;!!a. a &#8712; H &#10233; &#8854;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> a &#8712; H&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>add</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8896; a b. &#10214;a &#8712; H ; b &#8712; H&#10215; &#10233; a &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> b &#8712; H&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>smult_closed</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8896; a x. &#10214;a &#8712; carrier R; x &#8712; H&#10215; &#10233; a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> x &#8712; H&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;submodule H R M&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>intro</span><span> </span><span>submodule.intro</span><span> </span><span>subgroup.intro</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>submodule_axioms_def</span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp_all</span><span> </span><span>add</span><span> </span><span class="delimiter">:</span><span> </span><span>a_inv_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>module</span><span class="delimiter">)</span><span> </span><span>submoduleE</span><span> </span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;submodule H R M&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;H &#8838; carrier M&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;H &#8800; {}&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8896;a. a &#8712; H &#10233; &#8854;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> a &#8712; H&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8896;a b. &#10214;a &#8712; carrier R; b &#8712; H&#10215; &#10233; a &#8857;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> b &#8712; H&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8896; a b. &#10214;a &#8712; H ; b &#8712; H&#10215; &#10233; a &#8853;<span class="hidden">&#8664;</span><sub>M<span class="hidden">&#8665;</span></sub> b &#8712; H&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8896; x. x &#8712; H &#10233; (a_inv M x) &#8712; H&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>group.subgroupE</span><span class="delimiter">[</span><span>of</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;add_monoid M&quot;</span></span></span><span> </span><span>H</span><span class="delimiter">,</span><span> </span><span>OF</span><span> </span><span>_</span><span> </span><span>submodule.axioms</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span class="delimiter">[</span><span>OF</span><span> </span><span>assms</span><span class="delimiter">]</span><span class="delimiter">]</span><span> </span><span>a_comm_group</span><span>
</span><span>        </span><span>submodule.smult_closed</span><span class="delimiter">[</span><span>OF</span><span> </span><span>assms</span><span class="delimiter">]</span><span>
</span><span>  </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>comm_group_def</span><span> </span><span>a_inv_def</span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>module</span><span class="delimiter">)</span><span> </span><span>carrier_is_submodule</span><span> </span><span class="delimiter">:</span><span>
</span><span class="string"><span class="delete"><span class="delete">&quot;submodule (carrier M) R M&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>intro</span><span>  </span><span>submoduleI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a_comm_group</span><span> </span><span>group.inv_closed</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>comm_group_def</span><span> </span><span>a_inv_def</span><span> </span><span>group_def</span><span> </span><span>monoid_def</span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>submodule</span><span class="delimiter">)</span><span> </span><span>submodule_is_module</span><span> </span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;module R M&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;module R (M&#10631;carrier := H&#10632;)&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">!</span><span> </span><span class="delimiter">:</span><span> </span><span>moduleI</span><span> </span><span>abelian_group.intro</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;cring (R)&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>module_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abelian_monoid (M&#10631;carrier := H&#10632;)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>comm_monoid.submonoid_is_comm_monoid</span><span class="delimiter">[</span><span>OF</span><span> </span><span>_</span><span> </span><span>subgroup_is_submonoid</span><span class="delimiter">]</span><span> </span><span>assms</span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>abelian_monoid_def</span><span> </span><span>module_def</span><span> </span><span>abelian_group_def</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;abelian_group_axioms (M&#10631;carrier := H&#10632;)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>subgroup_is_group</span><span> </span><span>assms</span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>abelian_group_axioms_def</span><span> </span><span>comm_group_def</span><span> </span><span>abelian_monoid_def</span><span> </span><span>module_def</span><span> </span><span>abelian_group_def</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8896;z. z &#8712; H &#10233; &#120813;<span class="hidden">&#8664;</span><sub>R<span class="hidden">&#8665;</span></sub> &#8857; z = z&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>subgroup.subset</span><span class="delimiter">[</span><span>OF</span><span> </span><span>subgroup_axioms</span><span class="delimiter">]</span><span> </span><span>module.smult_one</span><span class="delimiter">[</span><span>OF</span><span> </span><span>assms</span><span class="delimiter">]</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>a</span><span> </span><span>b</span><span> </span><span>x</span><span> </span><span>y</span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;a &#8712; carrier R&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>b</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;b &#8712; carrier R&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>x</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;x &#8712; H&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>y</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;y &#8712; H&quot;</span></span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(a &#8853;<span class="hidden">&#8664;</span><sub>R<span class="hidden">&#8665;</span></sub> b) &#8857; x = a &#8857; x &#8853; b &#8857; x&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a</span><span> </span><span>b</span><span> </span><span>x</span><span> </span><span>module.smult_l_distr</span><span class="delimiter">[</span><span>OF</span><span> </span><span>assms</span><span class="delimiter">]</span><span> </span><span>subgroup.subset</span><span class="delimiter">[</span><span>OF</span><span> </span><span>subgroup_axioms</span><span class="delimiter">]</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;a &#8857; (x &#8853; y) = a &#8857; x &#8853; a &#8857; y&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a</span><span> </span><span>x</span><span> </span><span>y</span><span> </span><span>module.smult_r_distr</span><span class="delimiter">[</span><span>OF</span><span> </span><span>assms</span><span class="delimiter">]</span><span> </span><span>subgroup.subset</span><span class="delimiter">[</span><span>OF</span><span> </span><span>subgroup_axioms</span><span class="delimiter">]</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;a &#8855;<span class="hidden">&#8664;</span><sub>R<span class="hidden">&#8665;</span></sub> b &#8857; x = a &#8857; (b &#8857; x)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a</span><span> </span><span>b</span><span> </span><span>x</span><span> </span><span>module.smult_assoc1</span><span class="delimiter">[</span><span>OF</span><span> </span><span>assms</span><span class="delimiter">]</span><span> </span><span>subgroup.subset</span><span class="delimiter">[</span><span>OF</span><span> </span><span>subgroup_axioms</span><span class="delimiter">]</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>module</span><span class="delimiter">)</span><span> </span><span>module_incl_imp_submodule</span><span> </span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;H &#8838; carrier M&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;module R (M&#10631;carrier := H&#10632;)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;submodule H R M&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>intro</span><span> </span><span>submodule.intro</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>add.group_incl_imp_subgroup</span><span class="delimiter">[</span><span>OF</span><span> </span><span>assms</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span class="delimiter">]</span><span> </span><span>assms</span><span> </span><span>module.axioms</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span class="delimiter">[</span><span>OF</span><span> </span><span>assms</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span class="delimiter">]</span><span>
</span><span>        </span><span>module.smult_closed</span><span class="delimiter">[</span><span>OF</span><span> </span><span>assms</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span class="delimiter">]</span><span>
</span><span>  </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>abelian_group_def</span><span> </span><span>abelian_group_axioms_def</span><span> </span><span>comm_group_def</span><span> </span><span>submodule_axioms_def</span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp_all</span><span>
</span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>

</div>
</body>
</html>
